language: python
os:
    - linux

env:
    global:
        - CDF_LIB=$HOME/lib
        - COVERALLS_PARALLEL=true
    jobs:
        - INSTALL_EXTRA=0
        - INSTALL_EXTRA=2

python:
    - 2.7
    - 3.5
    - 3.6
    - 3.7
    - 3.8

jobs:
    allow_failures:
        - env: INSTALL_EXTRA=2

addons:
    apt_packages:
        - gfortran
        - gcc

install:
    - pip install tox-travis coveralls

script:
    - tox -e $(echo py$TRAVIS_PYTHON_VERSION-extra$INSTALL_EXTRA | tr -d .)

after_success:
    - coveralls --rcfile=tox.ini

notifications:
  webhooks: https://coveralls.io/webhook